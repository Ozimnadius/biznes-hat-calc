"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,i=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _classPrivateMethodInitSpec(e,t){_checkPrivateRedeclaration(e,t),t.add(e)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateMethodGet(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var media={mobile:window.matchMedia("(max-width: 767.98px)")};window.addEventListener("load",(function(){new Calc}));var _init=new WeakSet,Calc=function(){function e(t){var r=this;_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_init),_defineProperty(this,"update",(function(){r.square.update(),r.typeConstruction.update(),r.electric.update(),r.water.update(),r.heating.update(),r.building.update(),r.delivery.update(),r.total.update()}));Object.assign(this,{calcSelector:'[data-calc="calc"]',fieldSelector:'[data-calc="field"]',electricSelector:'[data-sum="electric"]',waterSelector:'[data-sum="water"]',heatingSelector:'[data-sum="heating"]',buildingSelector:'[data-sum="building"]',deliverySelector:'[data-sum="delivery"]'},t),this.fieldsElem=document.querySelectorAll(this.fieldSelector),this.floorElem=document.querySelector('[name="floors"]'),this.square=new Square,this.ratio=new Ratio,this.typeConstruction=new TypeConstruction(this),this.electric=new Sum(this.electricSelector,this),this.water=new SumWater(this.waterSelector,this),this.heating=new Sum(this.heatingSelector,this),this.building=new Sum(this.buildingSelector,this),this.delivery=new Sum(this.deliverySelector,this),this.total=new Total(this),_classPrivateMethodGet(this,_init,_init2).call(this)}return _createClass(e,[{key:"floor",get:function(){return this.floorElem.value}}]),e}();function _init2(){var e=this;this.update(),this.fieldsElem.forEach((function(t){return t.addEventListener("change",e.update)}))}var Ratio=function(){function e(t){_classCallCheck(this,e);Object.assign(this,{ceilingHeightSelector:"[data-ceilingHeight]",matrix:{2.5:1.04,3:1.08,3.5:1.12}},t),this.ceilingHeight=document.querySelector(this.ceilingHeightSelector).value}return _createClass(e,[{key:"value",get:function(){return this.matrix[this.ceilingHeight]}}]),e}(),Square=function(){function e(t){_classCallCheck(this,e);Object.assign(this,{squareSelector:'[data-square="total"]',itemSelector:'[data-square="item"]'},t),this.squareElem=document.querySelector(this.squareSelector),this.itemsElem=document.querySelectorAll(this.itemSelector)}return _createClass(e,[{key:"value",get:function(){return Array.from(this.itemsElem).reduce((function(e,t){return e*Number(t.value)}),1)}},{key:"update",value:function(){this.squareElem.value=this.value}}]),e}(),Sum=function(){function e(t,r){_classCallCheck(this,e),this.sum=document.querySelector(t),this.selectElem=this.sum.querySelector('[data-sum="select"]'),this.priceElem=this.sum.querySelector('[data-sum="price"]'),this.totalElem=this.sum.querySelector('[data-sum="total"]'),this.calc=r,this.total=0}return _createClass(e,[{key:"update",value:function(){this.priceElem.value=this.selectElem.value,this.total=Math.round(this.priceElem.value*this.calc.square.value),this.totalElem.value=this.total}}]),e}(),TypeConstruction=function(){function e(t,r){_classCallCheck(this,e);Object.assign(this,{nameSelector:'[data-type="name"]',priceSelector:'[data-type="price"]',totalSelector:'[data-type="total"]',dataSquares:{0:{floor:{1:{name:"Здание 1 этажное до 150 м²",price:53e3},2:{name:"Здание 2 этажное до 150 м²",price:43e3},3:{name:"Здание 3-х этажное более 1000 м²",price:34e3}}},150:{floor:{1:{name:"Здание 1 этажное от 151 до 300 м²",price:48500},2:{name:"Здание 2-х этажное от 151 до 300 м²",price:4e4},3:{name:"Здание 3-х этажное более 1000 м²",price:34e3}}},300:{floor:{1:{name:"Здание 1 этажное от 300 до 600 м²",price:46e3},2:{name:"Здание 2-х этажное от 300 до 600 м²",price:37e3},3:{name:"Здание 3-х этажное более 1000 м²",price:34e3}}},600:{floor:{1:{name:"Здание 1 этажное от 600 до 1000 м²",price:44e3},2:{name:"Здание 2-х этажное от 600 до 1000 м²",price:36e3},3:{name:"Здание 3-х этажное более 1000 м²",price:34e3}}},1e3:{floor:{1:{name:"Здание 1 этажное более 1000 м²",price:43e3},2:{name:"Здание 2-х этажное более 1000 м²",price:34e3},3:{name:"Здание 3-х этажное более 1000 м²",price:34e3}}}}},r),this.calc=t,this.nameElem=document.querySelector(this.nameSelector),this.priceElem=document.querySelector(this.priceSelector),this.totalElem=document.querySelector(this.totalSelector),this.total=0}return _createClass(e,[{key:"data",get:function(){var e=this,t=Object.keys(this.dataSquares).reverse().find((function(t){return e.calc.square.value>Number(t)}));return this.dataSquares[t].floor[this.calc.floor]}},{key:"update",value:function(){this.nameElem.value=this.data.name,this.priceElem.value=Math.round(this.data.price*this.calc.ratio.value),this.total=Math.round(this.priceElem.value*this.calc.square.value),this.totalElem.value=this.total}}]),e}(),SumWater=function(e){_inherits(r,Sum);var t=_createSuper(r);function r(e,i){var a;return _classCallCheck(this,r),(a=t.call(this,e,i)).valueElem=a.sum.querySelector('[data-sum="value"]'),a}return _createClass(r,[{key:"update",value:function(){this.total=Math.round(13e3*this.valueElem.value),this.totalElem.value=this.total,this.priceElem.value=Math.round(this.totalElem.value/this.calc.square.value)}}]),r}(),Total=function(){function e(t,r){_classCallCheck(this,e);Object.assign(this,{priceSelector:'[data-total="price"]',totalSelector:'[data-total="total"]'},r),this.calc=t,this.priceElem=document.querySelector(this.priceSelector),this.totalElem=document.querySelector(this.totalSelector)}return _createClass(e,[{key:"update",value:function(){this.totalElem.value=this.calc.typeConstruction.total+this.calc.electric.total+this.calc.water.total+this.calc.heating.total+this.calc.building.total+this.calc.delivery.total,this.priceElem.value=Math.round(this.totalElem.value/this.calc.square.value)}}]),e}();
//# sourceMappingURL=script.js.map