"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _classPrivateMethodInitSpec(e,t){_checkPrivateRedeclaration(e,t),t.add(e)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateMethodGet(e,t,a){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return a}var media={mobile:window.matchMedia("(max-width: 767.98px)")};window.addEventListener("load",(function(){new Calc}));var _init=new WeakSet,Calc=function(){function e(t){var a=this;_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_init),_defineProperty(this,"update",(function(){a.square.update(),a.typeConstruction.update(),a.electric.update(),a.water.update(),a.heating.update(),a.building.update(),a.delivery.update(),a.total.update()}));Object.assign(this,{calcSelector:'[data-calc="calc"]',fieldSelector:'[data-calc="field"]'},t),this.fieldsElem=document.querySelectorAll(this.fieldSelector),this.floorElem=document.querySelector('[name="floors"]'),this.square=new Square,this.ratio=new Ratio,this.typeConstruction=new TypeConstruction(this),this.electric=new Electric(this),this.water=new Water(this),this.heating=new Heating(this),this.building=new Building(this),this.delivery=new Delivery(this),this.total=new Total(this),_classPrivateMethodGet(this,_init,_init2).call(this)}return _createClass(e,[{key:"floor",get:function(){return this.floorElem.value}}]),e}();function _init2(){var e=this;this.update(),this.fieldsElem.forEach((function(t){return t.addEventListener("change",e.update)}))}var Ratio=function(){function e(t){_classCallCheck(this,e);Object.assign(this,{ceilingHeightSelector:"[data-ceilingHeight]",matrix:{2.5:1.04,3:1.08,3.5:1.12}},t),this.ceilingHeight=document.querySelector(this.ceilingHeightSelector).value}return _createClass(e,[{key:"value",get:function(){return this.matrix[this.ceilingHeight]}}]),e}(),Square=function(){function e(t){_classCallCheck(this,e);Object.assign(this,{squareSelector:'[data-square="total"]',itemSelector:'[data-square="item"]'},t),this.squareElem=document.querySelector(this.squareSelector),this.itemsElem=document.querySelectorAll(this.itemSelector)}return _createClass(e,[{key:"square",get:function(){return Array.from(this.itemsElem).reduce((function(e,t){return e*Number(t.value)}),1)}},{key:"update",value:function(){this.squareElem.value=this.square}}]),e}(),TypeConstruction=function(){function e(t,a){_classCallCheck(this,e);Object.assign(this,{nameSelector:'[data-type="name"]',priceSelector:'[data-type="price"]',totalSelector:'[data-type="total"]',dataSquares:{0:{floor:{1:{name:"Здание 1 этажное до 150 м²",price:53e3},2:{name:"Здание 2 этажное до 150 м²",price:43e3},3:{name:"Здание 3-х этажное более 1000 м²",price:34e3}}},150:{floor:{1:{name:"Здание 1 этажное от 151 до 300 м²",price:48500},2:{name:"Здание 2-х этажное от 151 до 300 м²",price:4e4},3:{name:"Здание 3-х этажное более 1000 м²",price:34e3}}},300:{floor:{1:{name:"Здание 1 этажное от 300 до 600 м²",price:46e3},2:{name:"Здание 2-х этажное от 300 до 600 м²",price:37e3},3:{name:"Здание 3-х этажное более 1000 м²",price:34e3}}},600:{floor:{1:{name:"Здание 1 этажное от 600 до 1000 м²",price:44e3},2:{name:"Здание 2-х этажное от 600 до 1000 м²",price:36e3},3:{name:"Здание 3-х этажное более 1000 м²",price:34e3}}},1e3:{floor:{1:{name:"Здание 1 этажное более 1000 м²",price:43e3},2:{name:"Здание 2-х этажное более 1000 м²",price:34e3},3:{name:"Здание 3-х этажное более 1000 м²",price:34e3}}}}},a),this.calc=t,this.nameElem=document.querySelector(this.nameSelector),this.priceElem=document.querySelector(this.priceSelector),this.totalElem=document.querySelector(this.totalSelector),this.total=0}return _createClass(e,[{key:"data",get:function(){var e=this,t=Object.keys(this.dataSquares).reverse().find((function(t){return e.calc.square.square>Number(t)}));return this.dataSquares[t].floor[this.calc.floor]}},{key:"update",value:function(){this.nameElem.value=this.data.name,this.priceElem.value=Math.round(this.data.price*this.calc.ratio.value),this.total=Math.round(this.priceElem.value*this.calc.square.square),this.totalElem.value=this.total}}]),e}(),Electric=function(){function e(t,a){_classCallCheck(this,e);Object.assign(this,{selectSelector:'[data-electric="select"]',priceSelector:'[data-electric="price"]',totalSelector:'[data-electric="total"]'},a),this.calc=t,this.selectElem=document.querySelector(this.selectSelector),this.priceElem=document.querySelector(this.priceSelector),this.totalElem=document.querySelector(this.totalSelector),this.total=0}return _createClass(e,[{key:"update",value:function(){this.priceElem.value=this.selectElem.value,this.total=Math.round(this.priceElem.value*this.calc.square.square),this.totalElem.value=this.total}}]),e}(),Water=function(){function e(t,a){_classCallCheck(this,e);Object.assign(this,{valueSelector:'[data-water="value"]',priceSelector:'[data-water="price"]',totalSelector:'[data-water="total"]'},a),this.calc=t,this.valueElem=document.querySelector(this.valueSelector),this.priceElem=document.querySelector(this.priceSelector),this.totalElem=document.querySelector(this.totalSelector),this.total=0}return _createClass(e,[{key:"update",value:function(){this.total=Math.round(13e3*this.valueElem.value),this.totalElem.value=this.total,this.priceElem.value=Math.round(this.totalElem.value/this.calc.square.square)}}]),e}(),Heating=function(){function e(t,a){_classCallCheck(this,e);Object.assign(this,{selectSelector:'[data-heating="select"]',priceSelector:'[data-heating="price"]',totalSelector:'[data-heating="total"]'},a),this.calc=t,this.selectElem=document.querySelector(this.selectSelector),this.priceElem=document.querySelector(this.priceSelector),this.totalElem=document.querySelector(this.totalSelector),this.total=0}return _createClass(e,[{key:"update",value:function(){this.priceElem.value=this.selectElem.value,this.total=Math.round(this.priceElem.value*this.calc.square.square),this.totalElem.value=this.total}}]),e}(),Building=function(){function e(t,a){_classCallCheck(this,e);Object.assign(this,{selectSelector:'[data-building="select"]',priceSelector:'[data-building="price"]',totalSelector:'[data-building="total"]'},a),this.calc=t,this.selectElem=document.querySelector(this.selectSelector),this.priceElem=document.querySelector(this.priceSelector),this.totalElem=document.querySelector(this.totalSelector),this.total=0}return _createClass(e,[{key:"update",value:function(){this.priceElem.value=this.selectElem.value,this.total=Math.round(this.priceElem.value*this.calc.square.square),this.totalElem.value=this.total}}]),e}(),Delivery=function(){function e(t,a){_classCallCheck(this,e);Object.assign(this,{selectSelector:'[data-delivery="select"]',priceSelector:'[data-delivery="price"]',totalSelector:'[data-delivery="total"]'},a),this.calc=t,this.selectElem=document.querySelector(this.selectSelector),this.priceElem=document.querySelector(this.priceSelector),this.totalElem=document.querySelector(this.totalSelector),this.total=0}return _createClass(e,[{key:"update",value:function(){this.priceElem.value=this.selectElem.value,this.total=Math.round(this.priceElem.value*this.calc.square.square),this.totalElem.value=this.total}}]),e}(),Total=function(){function e(t,a){_classCallCheck(this,e);Object.assign(this,{priceSelector:'[data-total="price"]',totalSelector:'[data-total="total"]'},a),this.calc=t,this.priceElem=document.querySelector(this.priceSelector),this.totalElem=document.querySelector(this.totalSelector)}return _createClass(e,[{key:"update",value:function(){this.totalElem.value=this.calc.typeConstruction.total+this.calc.electric.total+this.calc.water.total+this.calc.heating.total+this.calc.building.total+this.calc.delivery.total,this.priceElem.value=Math.round(this.totalElem.value/this.calc.square.square)}}]),e}();
//# sourceMappingURL=script.js.map